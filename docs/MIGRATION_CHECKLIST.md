# VideoFly è¿ç§»æ‰§è¡Œæ¸…å•

## ä½¿ç”¨è¯´æ˜

- åœ¨æ¯ä¸ªä»»åŠ¡å¼€å§‹å‰ï¼Œåœ¨ `[ ]` ä¸­å¡«å…¥å¼€å§‹æ—¥æœŸ
- å®Œæˆåå°† `[ ]` æ”¹ä¸º `[x]`
- é‡åˆ°é—®é¢˜åœ¨ `å¤‡æ³¨` ä¸­è®°å½•
- é£é™©é¡¹åœ¨ `âš ï¸` æ ‡è®°çš„ä»»åŠ¡éœ€è¦ç‰¹åˆ«æ³¨æ„

---

## é˜¶æ®µä¸€ï¼šå‡†å¤‡å·¥ä½œ

### 1.1 ç¯å¢ƒå‡†å¤‡
- [ ] åˆ›å»ºè¿ç§»åˆ†æ”¯ `git checkout -b migration/single-repo`
- [ ] æ›´æ–°æœ¬åœ°ç¯å¢ƒ `pnpm install`
- [ ] å¤‡ä»½æ•°æ®åº“ (ç”Ÿäº§ + å¼€å‘)
  ```bash
  # ç¤ºä¾‹å‘½ä»¤
  pg_dump $DATABASE_URL > backup_$(date +%Y%m%d).sql
  ```
- [ ] å¯¼å‡ºå½“å‰ç¯å¢ƒå˜é‡ `env > .env.backup.$(date +%Y%m%d)`
- [ ] åˆ›å»ºè¿ç§»æ—¥å¿—æ–‡ä»¶ `touch docs/migration-log.md`

**å¤‡æ³¨**: _____________

### 1.2 ä¾èµ–æ¸…å•
- [ ] åˆ—å‡ºæ‰€æœ‰å†…éƒ¨åŒ…ä¾èµ–
  ```bash
  # ä½¿ç”¨è„šæœ¬ç”Ÿæˆä¾èµ–å›¾
  pnpm ls --depth=0
  ```
- [ ] è®°å½•å½“å‰ç‰ˆæœ¬å·
  - Next.js: _____
  - React: _____
  - TypeScript: _____
  - Node.js: _____
- [ ] è¯†åˆ«å¯ç§»é™¤çš„ä¾èµ–
- [ ] ç¡®è®¤ç‰ˆæœ¬å…¼å®¹æ€§

**å¤‡æ³¨**: _____________

### 1.3 æµ‹è¯•å‡†å¤‡
- [ ] å‡†å¤‡æµ‹è¯•ç”¨æˆ·è´¦å·
- [ ] å‡†å¤‡æµ‹è¯•è§†é¢‘æ•°æ®
- [ ] è®°å½•å½“å‰åŠŸèƒ½æµ‹è¯•æ­¥éª¤
- [ ] è®¾ç½®æµ‹è¯•ç¯å¢ƒå˜é‡

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µäºŒï¼šæ•°æ®åº“å±‚è¿ç§»

### 2.1 åˆ›å»ºç›®å½•ç»“æ„
- [ ] åˆ›å»º `src/db/` ç›®å½•
- [ ] åˆ›å»º `src/db/schema/` å­ç›®å½•
- [ ] åˆ›å»º `src/db/migrations/` å­ç›®å½•

**å¤‡æ³¨**: _____________

### 2.2 è¿ç§» Schema å®šä¹‰
âš ï¸ **é«˜é£é™©** - ä¿®æ”¹æ•°æ®åº“å®šä¹‰éœ€è¦ç‰¹åˆ«å°å¿ƒ

- [ ] ä» `packages/db/prisma/schema.prisma` è¿ç§»åˆ° `src/db/schema/index.ts`
- [ ] åˆ›å»º `src/db/schema/videos.ts`
- [ ] åˆ›å»º `src/db/schema/users.ts`
- [ ] åˆ›å»º `src/db/schema/credits.ts`
- [ ] åˆ›å»º `src/db/schema/enums.ts`
- [ ] åˆ›å»º `src/db/types.ts` (TypeScript ç±»å‹)

**å…³é”®æ£€æŸ¥**:
```bash
# ç±»å‹æ£€æŸ¥
pnpm tsc --noEmit

# éªŒè¯ç±»å‹æ­£ç¡®å¯¼å‡º
```

**å¤‡æ³¨**: _____________

### 2.3 è¿ç§»æ•°æ®åº“å®ä¾‹
- [ ] ä» `packages/db/index.ts` è¿ç§»æ•°æ®åº“å®ä¾‹
- [ ] é…ç½® Kysely å®ä¾‹
- [ ] ç¡®ä¿è¿æ¥å­—ç¬¦ä¸²æ­£ç¡®

**å¤‡æ³¨**: _____________

### 2.4 æ›´æ–°å¯¼å…¥è·¯å¾„
- [ ] å…¨å±€æœç´¢ `@videofly/db`
- [ ] æ›¿æ¢ä¸º `@/db`
- [ ] éªŒè¯æ‰€æœ‰å¯¼å…¥æ­£ç¡®

**å¤‡æ³¨**: _____________

### 2.5 æµ‹è¯•æ•°æ®åº“å±‚
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
# åˆ›å»ºæµ‹è¯•è„šæœ¬ scripts/test-db.ts
```
- [ ] è¿è¡Œæ•°æ®åº“è¿æ¥æµ‹è¯•
- [ ] éªŒè¯æŸ¥è¯¢æ­£å¸¸å·¥ä½œ
- [ ] éªŒè¯ç±»å‹æ¨æ–­æ­£ç¡®

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µä¸‰ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘è¿ç§»

### 3.1 åˆ›å»ºç›®å½•ç»“æ„
- [ ] åˆ›å»º `src/services/` ç›®å½•
- [ ] åˆ›å»º `src/ai/` ç›®å½•
- [ ] åˆ›å»º `src/lib/` ç›®å½•
- [ ] åˆ›å»º `src/config/` ç›®å½•

**å¤‡æ³¨**: _____________

### 3.2 è¿ç§»ç§¯åˆ†æœåŠ¡
âš ï¸ **æ ¸å¿ƒä¸šåŠ¡** - ç§¯åˆ†ç³»ç»Ÿä¸èƒ½å‡ºé”™

- [ ] ä» `packages/common/src/services/credit.ts` è¿ç§»åˆ° `src/services/credit.ts`
- [ ] ç¡®ä¿å¯¼å…¥è·¯å¾„æ›´æ–° (`@videofly/db` â†’ `@/db`)
- [ ] éªŒè¯ FIFO é€»è¾‘å®Œæ•´
- [ ] éªŒè¯äº‹åŠ¡å¤„ç†æ­£ç¡®

**æµ‹è¯•æ¸…å•**:
- [ ] æµ‹è¯• `getBalance()` å‡½æ•°
- [ ] æµ‹è¯• `freeze()` å‡½æ•°
- [ ] æµ‹è¯• `settle()` å‡½æ•°
- [ ] æµ‹è¯• `release()` å‡½æ•°
- [ ] æµ‹è¯• `recharge()` å‡½æ•°

**å¤‡æ³¨**: _____________

### 3.3 è¿ç§»è§†é¢‘æœåŠ¡
âš ï¸ **æ ¸å¿ƒä¸šåŠ¡** - è§†é¢‘æœåŠ¡æ˜¯æ ¸å¿ƒåŠŸèƒ½

- [ ] ä» `packages/common/src/services/video.ts` è¿ç§»åˆ° `src/services/video.ts`
- [ ] æ›´æ–° AI æä¾›å•†å¯¼å…¥ (ç¨åå®Œæˆ)
- [ ] æ›´æ–°ç§¯åˆ†æœåŠ¡å¯¼å…¥
- [ ] æ›´æ–°å­˜å‚¨æœåŠ¡å¯¼å…¥

**å¤‡æ³¨**: _____________

### 3.4 è¿ç§»å­˜å‚¨æœåŠ¡
- [ ] ä» `packages/common/src/storage.ts` è¿ç§»åˆ° `src/lib/storage.ts`
- [ ] éªŒè¯ R2/S3 é…ç½®
- [ ] æµ‹è¯•ä¸Šä¼ åŠŸèƒ½
- [ ] æµ‹è¯•ä¸‹è½½åŠŸèƒ½

**å¤‡æ³¨**: _____________

### 3.5 è¿ç§» AI æä¾›å•†æŠ½è±¡
- [ ] åˆ›å»º `src/ai/index.ts` (æä¾›å•†å·¥å‚)
- [ ] åˆ›å»º `src/ai/types.ts` (ç±»å‹å®šä¹‰)
- [ ] åˆ›å»º `src/ai/providers/evolink.ts`
- [ ] åˆ›å»º `src/ai/providers/kie.ts`
- [ ] åˆ›å»º `src/ai/utils/callback-signature.ts`

**æµ‹è¯•æ¸…å•**:
- [ ] æµ‹è¯•æä¾›å•†å·¥å‚
- [ ] æµ‹è¯• evolink æä¾›å•†
- [ ] æµ‹è¯• kie æä¾›å•†
- [ ] æµ‹è¯•å›è°ƒç­¾åéªŒè¯

**å¤‡æ³¨**: _____________

### 3.6 è¿ç§»é…ç½®æ–‡ä»¶
- [ ] ä» `packages/common/src/config/credits.ts` è¿ç§»åˆ° `src/config/credits.ts`
- [ ] ä» `packages/common/src/config/models.ts` è¿ç§»åˆ° `src/config/models.ts`
- [ ] ä» `packages/common/src/config/site.ts` è¿ç§»åˆ° `src/config/site.ts`
- [ ] åˆ›å»º `src/config/index.ts` ç»Ÿä¸€å¯¼å‡º

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µå››ï¼šè®¤è¯å±‚è¿ç§»

### 4.1 åˆ›å»ºè®¤è¯ç›®å½•
- [ ] åˆ›å»º `src/lib/auth/` ç›®å½•

**å¤‡æ³¨**: _____________

### 4.2 è¿ç§»æœåŠ¡ç«¯è®¤è¯
- [ ] ä» `packages/auth/index.ts` è¿ç§»æœåŠ¡ç«¯ä»£ç åˆ° `src/lib/auth/server.ts`
- [ ] éªŒè¯ Better Auth é…ç½®
- [ ] éªŒè¯æ•°æ®åº“é€‚é…å™¨

**å¯¼å‡ºæ£€æŸ¥**:
```typescript
export { auth }
export { getCurrentUser }
export { requireAuth }
export { requireAdmin }
```

**å¤‡æ³¨**: _____________

### 4.3 è¿ç§»å®¢æˆ·ç«¯è®¤è¯
- [ ] ä» `packages/auth/client.ts` è¿ç§»åˆ° `src/lib/auth/client.ts`
- [ ] éªŒè¯ authClient é…ç½®
- [ ] éªŒè¯ React Hooks

**å¤‡æ³¨**: _____________

### 4.4 æ›´æ–° API è·¯ç”±
- [ ] æ›´æ–° `src/app/api/auth/[...all]/route.ts`
- [ ] éªŒè¯ Better Auth ç«¯ç‚¹æ­£å¸¸
- [ ] æµ‹è¯•ç™»å½•æµç¨‹
- [ ] æµ‹è¯•æ³¨å†Œæµç¨‹
- [ ] æµ‹è¯•ç™»å‡ºæµç¨‹

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µäº”ï¼šUI ç»„ä»¶è¿ç§»

### 5.1 è¿ç§»åŸºç¡€ UI ç»„ä»¶
- [ ] åˆ›å»º `src/components/ui/` ç›®å½•
- [ ] ä» `packages/ui/src/` è¿ç§»æ‰€æœ‰ç»„ä»¶

**ç»„ä»¶æ¸…å•** (æŒ‰å­—æ¯é¡ºåº):
- [ ] accordion.tsx
- [ ] alert.tsx
- [ ] avatar.tsx
- [ ] badge.tsx
- [ ] button.tsx
- [ ] card.tsx
- [ ] checkbox.tsx
- [ ] dialog.tsx
- [ ] dropdown-menu.tsx
- [ ] form.tsx
- [ ] input.tsx
- [ ] label.tsx
- [ ] select.tsx
- [ ] sheet.tsx
- [ ] table.tsx
- [ ] tabs.tsx
- [ ] textarea.tsx
- [ ] toast.tsx
- [ ] ... (å…¶ä»–ç»„ä»¶)

**å¤‡æ³¨**: _____________

### 5.2 æ›´æ–° Tailwind é…ç½®
- [ ] æ›´æ–° `tailwind.config.ts`
- [ ] éªŒè¯ CSS å˜é‡
- [ ] éªŒè¯æ’ä»¶é…ç½®

**å¤‡æ³¨**: _____________

### 5.3 æ›´æ–° shadcn/ui é…ç½®
- [ ] æ›´æ–° `components.json`
- [ ] éªŒè¯å¯¼å…¥è·¯å¾„
- [ ] æµ‹è¯•ç»„ä»¶æ¸²æŸ“

**å¤‡æ³¨**: _____________

### 5.4 è¿ç§»è§†é¢‘ç”Ÿæˆå™¨ç»„ä»¶
- [ ] åˆ›å»º `src/components/video-generator/` ç›®å½•
- [ ] ä» `packages/video-generator/src/` è¿ç§»
  - [ ] video-generator-input.tsx
  - [ ] types.ts
  - [ ] defaults.ts
- [ ] æ›´æ–°å¯¼å…¥è·¯å¾„ (`@videofly/ui` â†’ `@/components/ui`)
- [ ] æµ‹è¯•ç»„ä»¶åŠŸèƒ½

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µå…­ï¼šæ”¯ä»˜é›†æˆè¿ç§»

### 6.1 è¿ç§» Stripe é…ç½®
- [ ] åˆ›å»º `src/lib/stripe/` ç›®å½•
- [ ] ä» `packages/stripe/src/index.ts` è¿ç§»åˆ° `src/lib/stripe/index.ts`
- [ ] ä» `packages/stripe/src/plans.ts` è¿ç§»åˆ° `src/lib/stripe/plans.ts`

**å¤‡æ³¨**: _____________

### 6.2 è¿ç§» Webhook å¤„ç†
- [ ] ä» `packages/stripe/src/webhooks.ts` è¿ç§»åˆ° `src/lib/stripe/webhooks.ts`
- [ ] æ›´æ–° `src/app/api/webhooks/stripe/route.ts`
- [ ] æµ‹è¯• webhook æ¥æ”¶

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µä¸ƒï¼šAPI å±‚å¤„ç†

### 7.1 å¤„ç† tRPC
- [ ] åˆ›å»º `src/trpc/` ç›®å½•
- [ ] ä» `packages/api/src/` è¿ç§»é…ç½®
  - [ ] server.ts
  - [ ] client.ts
  - [ ] router.ts
- [ ] è¿ç§»è·¯ç”±å™¨
  - [ ] auth.ts
  - [ ] customer.ts
  - [ ] stripe.ts
  - [ ] k8s.ts
- [ ] æ›´æ–° `src/app/api/trpc/[...trpc]/route.ts`

**å¤‡æ³¨**: _____________

### 7.2 éªŒè¯ REST API
- [ ] åˆ—å‡ºç°æœ‰ REST API ç«¯ç‚¹
- [ ] éªŒè¯æ‰€æœ‰ç«¯ç‚¹æ­£å¸¸å·¥ä½œ
- [ ] æ ‡è®° tRPC ç«¯ç‚¹ä¸º legacy

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µå…«ï¼šå·¥å…·é…ç½®åˆå¹¶

### 8.1 åˆå¹¶ ESLint é…ç½®
- [ ] ä» `tooling/eslint-config/` è¯»å–é…ç½®
- [ ] åˆå¹¶åˆ° `eslint.config.mjs`
- [ ] ç§»é™¤ `@videofly/eslint-config` ä¾èµ–

**å¤‡æ³¨**: _____________

### 8.2 åˆå¹¶ Prettier é…ç½®
- [ ] ä» `tooling/prettier-config/` è¯»å–é…ç½®
- [ ] åˆå¹¶åˆ° `.prettierrc`
- [ ] ç§»é™¤ `@videofly/prettier-config` ä¾èµ–

**å¤‡æ³¨**: _____________

### 8.3 åˆå¹¶ Tailwind é…ç½®
- [ ] ä» `tooling/tailwind-config/` è¯»å–é…ç½®
- [ ] åˆå¹¶åˆ° `tailwind.config.ts`
- [ ] ç§»é™¤ `@videofly/tailwind-config` ä¾èµ–

**å¤‡æ³¨**: _____________

### 8.4 åˆå¹¶ TypeScript é…ç½®
- [ ] ä» `tooling/typescript-config/` è¯»å–é…ç½®
- [ ] åˆå¹¶åˆ° `tsconfig.json`
- [ ] ç§»é™¤ `@videofly/typescript-config` ä¾èµ–

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µä¹ï¼šNext.js é…ç½®æ›´æ–°

### 9.1 æ›´æ–° package.json
âš ï¸ **é‡è¦** - éœ€è¦ä»”ç»†åˆå¹¶æ‰€æœ‰ä¾èµ–

- [ ] åˆ›å»ºæ–°çš„ `package.json`
- [ ] åˆå¹¶æ‰€æœ‰ä¾èµ– (ä½¿ç”¨ `pnpm why` æ£€æŸ¥å†²çª)
- [ ] åˆå¹¶æ‰€æœ‰è„šæœ¬
- [ ] ç§»é™¤ workspace ä¾èµ–
- [ ] éªŒè¯ç‰ˆæœ¬å…¼å®¹æ€§

**æ–° scripts**:
```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "typecheck": "tsc --noEmit"
  }
}
```

**å¤‡æ³¨**: _____________

### 9.2 æ›´æ–° tsconfig.json
- [ ] æ›´æ–°è·¯å¾„åˆ«å
```json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./src/*"],
      "@/components/*": ["./src/components/*"],
      "@/lib/*": ["./src/lib/*"],
      "@/services/*": ["./src/services/*"],
      "@/db/*": ["./src/db/*"],
      "@/ai/*": ["./src/ai/*"],
      "@/config/*": ["./src/config/*"],
      "@/types/*": ["./src/types/*"]
    }
  }
}
```
- [ ] éªŒè¯æ‰€æœ‰è·¯å¾„æ­£ç¡®

**å¤‡æ³¨**: _____________

### 9.3 æ›´æ–° next.config.ts
- [ ] åˆå¹¶ `apps/nextjs/next.config.ts`
- [ ] æ·»åŠ å¿…è¦çš„ä¼˜åŒ–é…ç½®
- [ ] é…ç½®å›¾ç‰‡åŸŸå
- [ ] é…ç½®é‡å®šå‘/é‡å†™

**å¤‡æ³¨**: _____________

### 9.4 æ¸…ç†æ–‡ä»¶
- [ ] åˆ é™¤ `turbo.json`
- [ ] åˆ é™¤ `pnpm-workspace.yaml`
- [ ] æ›´æ–° `.gitignore`
- [ ] æ¸…ç† `apps/` å’Œ `packages/` ç›®å½• (è¿ç§»å®Œæˆå)

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µåï¼šåº”ç”¨ä»£ç æ›´æ–°

### 10.1 æ›´æ–°å¯¼å…¥è·¯å¾„ - è‡ªåŠ¨æ›¿æ¢
- [ ] åˆ›å»ºæ›¿æ¢è„šæœ¬
```bash
#!/bin/bash
# scripts/replace-imports.sh

find src -type f \( -name "*.ts" -o -name "*.tsx" \) -exec sed -i '' \
  -e "s|@videofly/db|@/db|g" \
  -e "s|from '@videofly/common'|from '@/services'|g" \
  -e "s|from '@videofly/common/ai'|from '@/ai'|g" \
  -e "s|from '@videofly/common/config|from '@/config|g" \
  -e "s|from '@videofly/common/services|from '@/services|g" \
  -e "s|from '@videofly/common/storage|from '@/lib/storage|g" \
  -e "s|from '@videofly/auth'|from '@/lib/auth'|g" \
  -e "s|from '@videofly/ui'|from '@/components/ui'|g" \
  -e "s|from '@videofly/stripe'|from '@/lib/stripe'|g" \
  -e "s|from '@videofly/video-generator'|from '@/components/video-generator'|g" \
  -e "s|from '@videofly/api'|from '@/trpc'|g" \
  {} +
```
- [ ] è¿è¡Œæ›¿æ¢è„šæœ¬
- [ ] æ£€æŸ¥æ›¿æ¢ç»“æœ
- [ ] ä¿®å¤é—æ¼çš„å¯¼å…¥

**å¤‡æ³¨**: _____________

### 10.2 æ›´æ–°å¯¼å…¥è·¯å¾„ - æ‰‹åŠ¨æ£€æŸ¥
- [ ] æœç´¢æ‰€æœ‰ `@videofly/` å¼•ç”¨
```bash
grep -r "@videofly/" src/
```
- [ ] æ‰‹åŠ¨ä¿®å¤ç‰¹æ®Šæƒ…å†µçš„å¯¼å…¥
- [ ] éªŒè¯æ‰€æœ‰å¯¼å…¥æ­£ç¡®

**å¤‡æ³¨**: _____________

### 10.3 æ›´æ–°é¡µé¢å¯¼å…¥
- [ ] æ£€æŸ¥ `src/app/` ä¸‹çš„æ‰€æœ‰å¯¼å…¥
- [ ] éªŒè¯é¡µé¢æ­£å¸¸æ¸²æŸ“

**å¤‡æ³¨**: _____________

### 10.4 æ›´æ–°ç»„ä»¶å¯¼å…¥
- [ ] æ£€æŸ¥ `src/components/` ä¸‹çš„æ‰€æœ‰å¯¼å…¥
- [ ] éªŒè¯ç»„ä»¶æ­£å¸¸å·¥ä½œ

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µåä¸€ï¼šæµ‹è¯•ä¸éªŒè¯

### 11.1 ç±»å‹æ£€æŸ¥
```bash
pnpm typecheck
```
- [ ] ä¿®å¤æ‰€æœ‰ç±»å‹é”™è¯¯
- [ ] ç¡®ä¿æ—  `any` ç±»å‹æ»¥ç”¨
- [ ] éªŒè¯ç±»å‹æ¨æ–­æ­£ç¡®

**å¤‡æ³¨**: _____________

### 11.2 ESLint æ£€æŸ¥
```bash
pnpm lint
```
- [ ] ä¿®å¤æ‰€æœ‰ ESLint é”™è¯¯
- [ ] ä¿®å¤æ‰€æœ‰è­¦å‘Š
- [ ] éªŒè¯ä»£ç é£æ ¼ä¸€è‡´

**å¤‡æ³¨**: _____________

### 11.3 æœ¬åœ°å¼€å‘æµ‹è¯•
```bash
pnpm dev
```
- [ ] éªŒè¯å¼€å‘æœåŠ¡å™¨å¯åŠ¨
- [ ] éªŒè¯çƒ­æ›´æ–°æ­£å¸¸
- [ ] æ£€æŸ¥æ§åˆ¶å°é”™è¯¯

**å¤‡æ³¨**: _____________

### 11.4 åŠŸèƒ½æµ‹è¯•æ¸…å•

#### ç”¨æˆ·è®¤è¯
- [ ] ç”¨æˆ·æ³¨å†Œ
- [ ] ç”¨æˆ·ç™»å½• (é‚®ç®±å¯†ç )
- [ ] OAuth ç™»å½• (GitHub)
- [ ] OAuth ç™»å½• (Google)
- [ ] ç”¨æˆ·ç™»å‡º
- [ ] ä¼šè¯æŒä¹…åŒ–

**å¤‡æ³¨**: _____________

#### è§†é¢‘ç”Ÿæˆ
- [ ] æ–‡æœ¬è½¬è§†é¢‘åˆ›å»º
- [ ] å›¾ç‰‡è½¬è§†é¢‘åˆ›å»º
- [ ] çŠ¶æ€è½®è¯¢
- [ ] è§†é¢‘ä¸‹è½½
- [ ] è§†é¢‘åˆ é™¤
- [ ] é”™è¯¯å¤„ç†

**å¤‡æ³¨**: _____________

#### ç§¯åˆ†ç³»ç»Ÿ
- [ ] ä½™é¢æŸ¥è¯¢
- [ ] ç§¯åˆ†å†»ç»“
- [ ] ç§¯åˆ†ç»“ç®—
- [ ] ç§¯åˆ†é‡Šæ”¾
- [ ] äº¤æ˜“å†å²
- [ ] ç§¯åˆ†å……å€¼

**å¤‡æ³¨**: _____________

#### AI å›è°ƒ
- [ ] evolink å›è°ƒå¤„ç†
- [ ] kie å›è°ƒå¤„ç†
- [ ] ç­¾åéªŒè¯
- [ ] é”™è¯¯é‡è¯•

**å¤‡æ³¨**: _____________

#### æ”¯ä»˜æµç¨‹
- [ ] Stripe ç»“è´¦
- [ ] è®¢é˜…ç®¡ç†
- [ ] Webhook å¤„ç†

**å¤‡æ³¨**: _____________

#### UI ç»„ä»¶
- [ ] æ‰€æœ‰åŸºç¡€ UI ç»„ä»¶æ¸²æŸ“
- [ ] è§†é¢‘ç”Ÿæˆå™¨ç»„ä»¶
- [ ] å“åº”å¼å¸ƒå±€
- [ ] å›½é™…åŒ–åˆ‡æ¢

**å¤‡æ³¨**: _____________

### 11.5 æ„å»ºæµ‹è¯•
```bash
pnpm build
```
- [ ] éªŒè¯æ„å»ºæˆåŠŸ
- [ ] æ£€æŸ¥æ„å»ºè¾“å‡º
- [ ] éªŒè¯æ„å»ºå¤§å°åˆç†
- [ ] æ£€æŸ¥æ„å»ºè­¦å‘Š

**å¤‡æ³¨**: _____________

### 11.6 ç”Ÿäº§ç¯å¢ƒæµ‹è¯•
```bash
pnpm build && pnpm start
```
- [ ] éªŒè¯ç”Ÿäº§æœåŠ¡å™¨å¯åŠ¨
- [ ] æµ‹è¯•æ‰€æœ‰ API ç«¯ç‚¹
- [ ] æµ‹è¯•é¡µé¢æ¸²æŸ“
- [ ] æ£€æŸ¥æ€§èƒ½æŒ‡æ ‡

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µåäºŒï¼šéƒ¨ç½²å‡†å¤‡

### 12.1 ç¯å¢ƒå˜é‡æ£€æŸ¥
- [ ] åˆ›å»ºæ–°çš„ `.env.example`
- [ ] éªŒè¯æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡
- [ ] é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
- [ ] éªŒè¯æ•æ„Ÿä¿¡æ¯æ­£ç¡®

**ç¯å¢ƒå˜é‡æ¸…å•**:
```
âœ“ DATABASE_URL
âœ“ BETTER_AUTH_SECRET
âœ“ GITHUB_CLIENT_ID / SECRET
âœ“ GOOGLE_CLIENT_ID / SECRET
âœ“ STORAGE_ENDPOINT / KEY / BUCKET
âœ“ EVOLINK_API_KEY
âœ“ KIE_API_KEY
âœ“ AI_CALLBACK_URL / SECRET
âœ“ STRIPE_SECRET_KEY / WEBHOOK_SECRET
âœ“ CREEM_API_KEY / WEBHOOK_SECRET
âœ“ RESEND_API_KEY
```

**å¤‡æ³¨**: _____________

### 12.2 Vercel é…ç½®
- [ ] åˆ›å»º/æ›´æ–° `vercel.json`
- [ ] é…ç½®ç¯å¢ƒå˜é‡
- [ ] é…ç½®åŸŸå
- [ ] é…ç½®æ„å»ºå‘½ä»¤

**å¤‡æ³¨**: _____________

### 12.3 Docker é…ç½® (å¯é€‰)
- [ ] åˆ›å»º `Dockerfile`
- [ ] åˆ›å»º `.dockerignore`
- [ ] æµ‹è¯• Docker æ„å»º
- [ ] æµ‹è¯• Docker è¿è¡Œ

**å¤‡æ³¨**: _____________

### 12.4 æ•°æ®åº“è¿ç§»
- [ ] å¤‡ä»½ç”Ÿäº§æ•°æ®åº“
- [ ] è¿è¡Œè¿ç§»è„šæœ¬ (å¦‚æœ‰)
- [ ] éªŒè¯è¿ç§»ç»“æœ
- [ ] éªŒè¯æ•°æ®å®Œæ•´æ€§

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µåä¸‰ï¼šéƒ¨ç½²

### 13.1 é¢„å‘å¸ƒéƒ¨ç½²
- [ ] éƒ¨ç½²åˆ°é¢„å‘å¸ƒç¯å¢ƒ
- [ ] è¿è¡Œå†’çƒŸæµ‹è¯•
- [ ] éªŒè¯æ‰€æœ‰åŠŸèƒ½
- [ ] æ€§èƒ½æµ‹è¯•

**å¤‡æ³¨**: _____________

### 13.2 ç”Ÿäº§éƒ¨ç½²
âš ï¸ **å…³é”®æ­¥éª¤** - å»ºè®®åœ¨ä½å³°æœŸè¿›è¡Œ

- [ ] é€šçŸ¥ç”¨æˆ·è®¡åˆ’ç»´æŠ¤
- [ ] æ‰§è¡Œæœ€åå¤‡ä»½
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] éªŒè¯éƒ¨ç½²æˆåŠŸ
- [ ] è¿è¡Œå¥åº·æ£€æŸ¥
- [ ] ç›‘æ§é”™è¯¯æ—¥å¿—

**å¤‡æ³¨**: _____________

### 13.3 éƒ¨ç½²åéªŒè¯
- [ ] æ£€æŸ¥ç”¨æˆ·è®¤è¯
- [ ] æ£€æŸ¥è§†é¢‘ç”Ÿæˆ
- [ ] æ£€æŸ¥ç§¯åˆ†ç³»ç»Ÿ
- [ ] æ£€æŸ¥æ”¯ä»˜æµç¨‹
- [ ] æ£€æŸ¥ AI å›è°ƒ
- [ ] ç›‘æ§æœåŠ¡å™¨æŒ‡æ ‡

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µåå››ï¼šæ–‡æ¡£æ›´æ–°

### 14.1 æ›´æ–° README
- [ ] æ›´æ–°é¡¹ç›®æè¿°
- [ ] æ›´æ–°æŠ€æœ¯æ ˆ
- [ ] æ›´æ–°å®‰è£…è¯´æ˜
- [ ] æ›´æ–°å¼€å‘æŒ‡å—

**å¤‡æ³¨**: _____________

### 14.2 æ›´æ–° CONTRIBUTING
- [ ] æ›´æ–°è´¡çŒ®æŒ‡å—
- [ ] æ›´æ–°å¼€å‘ç¯å¢ƒè®¾ç½®
- [ ] æ›´æ–°ä»£ç è§„èŒƒ

**å¤‡æ³¨**: _____________

### 14.3 æ›´æ–° API æ–‡æ¡£
- [ ] æ›´æ–° API ç«¯ç‚¹
- [ ] æ›´æ–°è¯·æ±‚/å“åº”ç¤ºä¾‹
- [ ] æ›´æ–°è®¤è¯è¯´æ˜

**å¤‡æ³¨**: _____________

### 14.4 åˆ›å»ºè¿ç§»æ—¥å¿—
- [ ] åœ¨ `docs/migration-log.md` è®°å½•è¿ç§»è¿‡ç¨‹
- [ ] è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- [ ] è®°å½•æ€§èƒ½æ”¹è¿›

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µåäº”ï¼šæ¸…ç†å·¥ä½œ

### 15.1 æ¸…ç†æ—§ä»£ç 
âš ï¸ **è°¨æ…æ“ä½œ** - ç¡®ä¿ä¸€åˆ‡æ­£å¸¸åå†æ‰§è¡Œ

- [ ] åˆ é™¤ `apps/` ç›®å½•
- [ ] åˆ é™¤ `packages/` ç›®å½•
- [ ] åˆ é™¤ `tooling/` ç›®å½•
- [ ] åˆ é™¤ `turbo.json`
- [ ] åˆ é™¤ `pnpm-workspace.yaml`

**å¤‡æ³¨**: _____________

### 15.2 æ¸…ç†ä¾èµ–
- [ ] ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–
```bash
pnpm depcheck
```
- [ ] æ¸…ç† lockfile
- [ ] é‡æ–°ç”Ÿæˆ lockfile
```bash
rm pnpm-lock.yaml
pnpm install
```

**å¤‡æ³¨**: _____________

### 15.3 ä»£ç å®¡æŸ¥
- [ ] å®¡æŸ¥æ‰€æœ‰æ›´æ”¹
- [ ] ä¿®å¤ä»£ç å¼‚å‘³
- [ ] ä¼˜åŒ–æ€§èƒ½
- [ ] æ·»åŠ å¿…è¦æ³¨é‡Š

**å¤‡æ³¨**: _____________

---

## é˜¶æ®µåå…­ï¼šæ”¶å°¾

### 16.1 Git æ“ä½œ
- [ ] æäº¤æ‰€æœ‰æ›´æ”¹
```bash
git add .
git commit -m "feat: migrate from monorepo to single repo"
```
- [ ] æ¨é€åˆ°è¿œç¨‹
```bash
git push origin migration/single-repo
```
- [ ] åˆ›å»º Pull Request
- [ ] è¯·æ±‚ä»£ç å®¡æŸ¥

**å¤‡æ³¨**: _____________

### 16.2 å›¢é˜Ÿæ²Ÿé€š
- [ ] é€šçŸ¥å›¢é˜Ÿè¿ç§»å®Œæˆ
- [ ] åˆ†äº«è¿ç§»æ–‡æ¡£
- [ ] å®‰æ’å›¢é˜ŸåŸ¹è®­
- [ ] æ”¶é›†åé¦ˆ

**å¤‡æ³¨**: _____________

### 16.3 ç›‘æ§
- [ ] è®¾ç½®é”™è¯¯ç›‘æ§
- [ ] è®¾ç½®æ€§èƒ½ç›‘æ§
- [ ] å®šæœŸæ£€æŸ¥æ—¥å¿—
- [ ] å‡†å¤‡å›æ»šæ–¹æ¡ˆ

**å¤‡æ³¨**: _____________

---

## é™„å½•ï¼šå¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
pnpm dev

# æ„å»º
pnpm build

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# Lint
pnpm lint

# ä¿®å¤ Lint
pnpm lint --fix

# æµ‹è¯•
pnpm test

# æ•°æ®åº“è¿ç§»
pnpm db:migrate

# æ•°æ®åº“ç§å­
pnpm db:seed
```

### å¯¼å…¥è·¯å¾„æ›¿æ¢æ˜ å°„

| æ—§è·¯å¾„ | æ–°è·¯å¾„ |
|--------|--------|
| `@videofly/db` | `@/db` |
| `@videofly/common` | `@/services` |
| `@videofly/common/ai` | `@/ai` |
| `@videofly/common/config` | `@/config` |
| `@videofly/common/services` | `@/services` |
| `@videofly/common/storage` | `@/lib/storage` |
| `@videofly/auth` | `@/lib/auth` |
| `@videofly/ui` | `@/components/ui` |
| `@videofly/stripe` | `@/lib/stripe` |
| `@videofly/video-generator` | `@/components/video-generator` |
| `@videofly/api` | `@/trpc` |

### å…³é”®æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | æ–°ä½ç½® |
|------|--------|
| æ•°æ®åº“å®ä¾‹ | `src/db/index.ts` |
| Schema å®šä¹‰ | `src/db/schema/` |
| ç§¯åˆ†æœåŠ¡ | `src/services/credit.ts` |
| è§†é¢‘æœåŠ¡ | `src/services/video.ts` |
| AI æä¾›å•† | `src/ai/providers/` |
| è®¤è¯é…ç½® | `src/lib/auth/server.ts` |
| Stripe é…ç½® | `src/lib/stripe/` |
| UI ç»„ä»¶ | `src/components/ui/` |

### è”ç³»äºº

| è§’è‰² | å§“å | è”ç³»æ–¹å¼ |
|------|------|---------|
| é¡¹ç›®è´Ÿè´£äºº | | |
| æŠ€æœ¯è´Ÿè´£äºº | | |
| æ•°æ®åº“ä¸“å®¶ | | |
| DevOps å·¥ç¨‹å¸ˆ | | |

---

**æ¸…å•ç»“æŸ**

ç¥è¿ç§»é¡ºåˆ©ï¼ğŸ‰
